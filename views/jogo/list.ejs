<%-include('../cabecalho.ejs')%>
    <h1 class="mb-4">Jogos Cadastrados</h1>
    
    <div class="mb-3">
        <form action="/jogo/list" method="post" class="d-flex">
            <input type="text" name="filtro" class="form-control me-2" placeholder="Filtrar por nome">
            <button type="submit" class="btn btn-primary"><i class="bi bi-search"></i> Pesquisar</button>
        </form>
    </div>
    
    <div class="table-responsive">
        <table class="table table-dark table-striped table-hover align-middle">
            <thead>
                <tr>
                <th scope="col">Nome</th>
                    <th scope="col">Gêneros</th>
                    <th scope="col">Preço</th>
                <th scope="col">Descrição</th>
                    <th scope="col">RAM</th>
                    <th scope="col">Armazenamento</th>
                    <th scope="col">Distribuidora</th>
                    <th scope="col">Desenvolvedora</th>
                <th scope="col">Lançamento</th>
                    <th scope="col">Poster</th>
                    <th scope="col">Ações</th>
                </tr>
            </thead>
            <tbody>
                <%for(const{id, nome, generos, preco, descricao, minRam, armazenamento, distribuidora, desenvolvedora, dataDeLancamento, poster} of Jogos){%>
                    <tr>
                    <td><%=nome%></td>
                        <td><%=generos.join(', ')%></td>                     <td>R$ <%=preco.toFixed(2)%></td>
                    <td class="table-description" data-bs-toggle="popover" data-bs-trigger="hover" data-bs-placement="top"data-bs-content="<%=descricao%>">
                        <%=descricao%>
                    </td>
                        <td><%=minRam%></td>
                        <td><%=armazenamento%></td>
                    <td><%=distribuidora.nome%></td>
                        <td><%=desenvolvedora.nome%></td>
                        <td><%=dataDeLancamento.toLocaleDateString('pt-BR')%></td> <td>
                            <img src="<%=poster%>" class="table-img" alt="Poster de <%=nome%>">
                        </td>
                        <td>
                        <a href="/jogo/edit/<%=id%>" class="btn btn-warning btn-sm mb-1" title="Editar">
                                <i class="bi bi-pencil-fill"></i>
                            </a>
                            <a href="/jogo/delete/<%=id%>" class="btn btn-danger btn-sm mb-1" title="Excluir" onclick="return confirm('Tem certeza que deseja excluir?');">
                                <i class="bi bi-trash-fill"></i>
                            </a>
                        </td>
                    </tr>
                <%}%>
            </tbody>
        </table>
    </div>
<%-include('../rodape.ejs')%>